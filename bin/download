#!/usr/bin/env bash

set -euo pipefail

current_script_path=${BASH_SOURCE[0]}
plugin_dir=$(dirname "$(dirname "$current_script_path")")

# shellcheck source=../lib/utils.bash
. "${plugin_dir}/lib/utils.bash"

printf "* Downloading %s@%s...\\n" "$TOOL_NAME" "$ASDF_INSTALL_VERSION"
mkdir -p "$ASDF_DOWNLOAD_PATH"
git clone --depth 1 --branch "$ASDF_INSTALL_VERSION" "$GH_REPO" "$ASDF_DOWNLOAD_PATH" || fail "Could not download $GH_REPO"
printf "* Downloaded to %s\\n" "$ASDF_DOWNLOAD_PATH"
